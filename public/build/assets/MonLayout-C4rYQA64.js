import{a as S,b as $,_ as P}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Bms3sb-l.js";import{d as L,r as F,n as R,l as T,k as V,e as d,o as u,a,p as m,u as e,g as l,w as n,z as i,T as r,t as b,b as y,F as z,f as B,y as E,R as j}from"./app-CLNz0TeQ.js";import{_ as o}from"./TextLink.vue_vue_type_script_setup_true_lang-BdFudh-7.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"min-h-screen bg-gray-900 text-gray-100 flex overflow-hidden"},K={class:"flex flex-col h-full"},O={class:"flex-1 py-4"},X={key:0,class:"space-y-2"},H={key:0,class:"bg-red-500 text-white text-xs rounded-full px-2 py-0.5 ml-2 animate-pulse"},I={key:1,class:"space-y-2"},J={key:2,class:"space-y-2"},Q={key:3,class:"mt-6 px-4"},U={key:0,class:"space-y-3 max-h-64 overflow-y-auto"},W={class:"text-sm text-white"},Y={class:"text-xs text-gray-400 mt-1"},Z=["onClick"],ss={key:1,class:"text-sm text-gray-400 italic"},as={class:"p-4 mt-auto"},es={class:"flex items-center justify-between w-full px-4 py-3 bg-gray-800 text-gray-200 rounded-lg hover:bg-gray-700 transition-all duration-300"},ts={class:"flex items-center gap-2"},ls={key:0,class:"bg-red-500 text-white text-xs rounded-full px-2 py-0.5 animate-pulse"},ns={class:"flex-1 p-4 sm:p-6 bg-gray-800 overflow-y-auto transition-all duration-300 relative animate-fade-in"},rs=L({__name:"MonLayout",setup(os){var D;const v=F(!1),k=()=>{v.value=!v.value},w=R(),x=w.props.auth.user,M=x&&x.role==="admin",N=x&&x.role==="formateur",_=x&&x.role==="apprenant",p=F(((D=w.props.dashboardData)==null?void 0:D.notifications)||[]);T(()=>{var f;return(f=w.props.dashboardData)==null?void 0:f.notifications},f=>{p.value=f||[]},{immediate:!0});const C=V(()=>p.value.filter(f=>f.type==="note_update").length),A=f=>{var c;const s=(c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.content;if(!s){console.error("CSRF token not found");return}j.post(r("notifications.read",f),{},{headers:{"X-CSRF-TOKEN":s}}).then(g=>{g.data.success?p.value=p.value.filter(h=>h.id!==f):console.error("Failed to mark as read:",g.data.message)}).catch(g=>{var h;console.error("Error marking notification as read:",((h=g.response)==null?void 0:h.data)||g.message)})},t=f=>r().current(f);return(f,s)=>(u(),d("div",G,[a("aside",{class:i(["sidebar flex-shrink-0 bg-gradient-to-b from-gray-800 to-gray-900 shadow-xl transition-all duration-300",v.value?"w-64":"w-0 lg:w-64"])},[a("div",K,[a("div",{class:"p-4 flex items-center justify-between bg-gray-900"},[s[1]||(s[1]=a("div",{class:"flex items-center gap-3"},[a("div",{class:"bg-white p-1 rounded-full shadow-md"},[a("img",{src:"/img/logo.png",alt:"Logo CFPCa",class:"h-10 w-10 rounded-full animate-spin-slow"})]),a("span",{class:"text-lg font-bold text-white"},"CFPCa")],-1)),a("button",{onClick:k,class:"lg:hidden text-gray-200 hover:text-white p-2 rounded-full hover:bg-gray-600 transition-all"},s[0]||(s[0]=[a("i",{class:"fas fa-times text-lg"},null,-1)]))]),a("nav",O,[e(_)?(u(),d("div",X,[l(o,{href:e(r)("apprenant.dashboard"),class:i(["nav-link",{active:t("apprenant.dashboard")}])},{default:n(()=>s[2]||(s[2]=[a("i",{class:"fas fa-tachometer-alt w-6 text-indigo-400"},null,-1),a("span",{class:"flex-1"},"Dashboard",-1)])),_:1},8,["href","class"]),l(o,{href:e(r)("apprenant.disciplines"),class:i(["nav-link",{active:t("apprenant.disciplines")}])},{default:n(()=>s[3]||(s[3]=[a("i",{class:"fas fa-book-open w-6 text-indigo-400"},null,-1),a("span",{class:"flex-1"},"Mes Disciplines",-1)])),_:1},8,["href","class"]),l(o,{href:e(r)("apprenant.notes"),class:i(["nav-link",{active:t("apprenant.notes")}])},{default:n(()=>[s[4]||(s[4]=a("i",{class:"fas fa-star w-6 text-indigo-400"},null,-1)),s[5]||(s[5]=a("span",{class:"flex-1"},"Mes Notes",-1)),C.value>0?(u(),d("span",H,b(C.value),1)):m("",!0)]),_:1},8,["href","class"]),l(o,{href:e(r)("apprenant.carnet"),class:i(["nav-link",{active:t("apprenant.carnet")}])},{default:n(()=>s[6]||(s[6]=[a("i",{class:"fas fa-book w-6 text-indigo-400"},null,-1),a("span",{class:"flex-1"},"Mon Carnet",-1)])),_:1},8,["href","class"]),l(o,{href:e(r)("apprenant.progression"),class:i(["nav-link",{active:t("apprenant.progression")}])},{default:n(()=>s[7]||(s[7]=[a("i",{class:"fas fa-chart-line w-6 text-indigo-400"},null,-1),a("span",{class:"flex-1"},"Ma Progression",-1)])),_:1},8,["href","class"])])):m("",!0),e(N)?(u(),d("div",I,[l(o,{href:e(r)("formateur.dashboard"),class:i(["nav-link",{active:t("formateur.dashboard"),"formateur-active":t("formateur.dashboard")}])},{default:n(()=>s[8]||(s[8]=[a("i",{class:"fas fa-tachometer-alt w-6 text-red-400"},null,-1),a("span",{class:"flex-1"},"Dashboard",-1)])),_:1},8,["href","class"]),l(o,{href:e(r)("formateur.formations"),class:i(["nav-link",{active:t("formateur.formations"),"formateur-active":t("formateur.formations")}])},{default:n(()=>s[9]||(s[9]=[a("i",{class:"fas fa-book w-6 text-red-400"},null,-1),a("span",{class:"flex-1"},"Mes Formations",-1)])),_:1},8,["href","class"]),l(o,{href:e(r)("formateur.apprenants"),class:i(["nav-link",{active:t("formateur.apprenants"),"formateur-active":t("formateur.apprenants")}])},{default:n(()=>s[10]||(s[10]=[a("i",{class:"fas fa-users w-6 text-red-400"},null,-1),a("span",{class:"flex-1"},"Mes Apprenants",-1)])),_:1},8,["href","class"]),l(o,{href:e(r)("formateur.notes"),class:i(["nav-link",{active:t("formateur.notes"),"formateur-active":t("formateur.notes")}])},{default:n(()=>s[11]||(s[11]=[a("i",{class:"fas fa-star w-6 text-red-400"},null,-1),a("span",{class:"flex-1"},"Gérer les Notes",-1)])),_:1},8,["href","class"]),l(o,{href:e(r)("formateur.disciplines"),class:i(["nav-link",{active:t("formateur.disciplines"),"formateur-active":t("formateur.disciplines")}])},{default:n(()=>s[12]||(s[12]=[a("i",{class:"fas fa-book-open w-6 text-red-400"},null,-1),a("span",{class:"flex-1"},"Mes Disciplines",-1)])),_:1},8,["href","class"])])):m("",!0),e(M)?(u(),d("div",J,[l(o,{href:e(r)("admin.dashboard"),class:i(["nav-link",{active:t("admin.dashboard")}])},{default:n(()=>s[13]||(s[13]=[a("i",{class:"fas fa-tachometer-alt w-6 text-white"},null,-1),a("span",{class:"flex-1"},"Dashboard Admin",-1)])),_:1},8,["href","class"]),l(o,{href:e(r)("apprenants.index"),class:i(["nav-link",{active:t("apprenants.index")}])},{default:n(()=>s[14]||(s[14]=[a("i",{class:"fas fa-user-tie w-6 text-white"},null,-1),a("span",{class:"flex-1"},"Apprenants",-1)])),_:1},8,["href","class"]),l(o,{href:e(r)("formateurs.index"),class:i(["nav-link",{active:t("formateurs.index")}])},{default:n(()=>s[15]||(s[15]=[a("i",{class:"fas fa-user-tie w-6 text-white"},null,-1),a("span",{class:"flex-1"},"Formateurs",-1)])),_:1},8,["href","class"]),l(o,{href:e(r)("formations.index"),class:i(["nav-link",{active:t("formations.index")}])},{default:n(()=>s[16]||(s[16]=[a("i",{class:"fas fa-book w-6 text-white"},null,-1),a("span",{class:"flex-1"},"Formations",-1)])),_:1},8,["href","class"]),l(o,{href:e(r)("disciplines.index"),class:i(["nav-link",{active:t("disciplines.index")}])},{default:n(()=>s[17]||(s[17]=[a("i",{class:"fas fa-book-open w-6 text-white"},null,-1),a("span",{class:"flex-1"},"Disciplines",-1)])),_:1},8,["href","class"])])):m("",!0),e(_)?(u(),d("div",Q,[s[18]||(s[18]=a("h3",{class:"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2"},[a("i",{class:"fas fa-bell text-indigo-400"}),y(" Notifications ")],-1)),p.value.length?(u(),d("div",U,[(u(!0),d(z,null,B(p.value,c=>(u(),d("div",{key:c.id,class:"p-3 bg-gray-700 rounded-lg shadow-md hover:bg-gray-600 transition-all duration-200"},[a("p",W,b(c.message),1),a("p",Y,b(c.created_at),1),a("button",{onClick:g=>A(c.id),class:"text-indigo-400 hover:text-indigo-300 text-xs mt-2 transition-colors"}," Marquer comme lu ",8,Z)]))),128))])):(u(),d("p",ss,"Aucune notification"))])):m("",!0)]),a("div",as,[l(e(P),null,{default:n(()=>[l(e(S),{"as-child":""},{default:n(()=>[a("button",es,[a("span",ts,[s[19]||(s[19]=a("i",{class:"fas fa-user w-6 text-indigo-400"},null,-1)),s[20]||(s[20]=a("span",{class:"flex-1"},"Profil",-1)),p.value.length?(u(),d("span",ls,b(p.value.length),1)):m("",!0)]),s[21]||(s[21]=a("i",{class:"fas fa-chevron-down"},null,-1))])]),_:1}),l(e($),{class:"bg-gray-800 text-gray-100 rounded-lg shadow-lg w-48"},{default:n(()=>[l(o,{class:"block px-4 py-2 hover:bg-gray-700 transition-all",href:e(r)("profile.edit"),as:"button"},{default:n(()=>s[22]||(s[22]=[y(" Paramètres ")])),_:1},8,["href"]),l(o,{class:"block px-4 py-2 hover:bg-gray-700 transition-all",method:"post",href:e(r)("logout"),as:"button"},{default:n(()=>s[23]||(s[23]=[y(" Déconnexion ")])),_:1},8,["href"])]),_:1})]),_:1})])])],2),a("main",ns,[v.value?m("",!0):(u(),d("button",{key:0,onClick:k,class:"lg:hidden fixed top-4 left-4 z-30 bg-indigo-600 text-white p-2 rounded-full shadow-lg hover:bg-indigo-700 transition-all"},s[24]||(s[24]=[a("i",{class:"fas fa-bars text-lg"},null,-1)]))),E(f.$slots,"default",{},void 0,!0),s[25]||(s[25]=a("div",{class:"scroll-hint bg-indigo-500 text-white px-3 py-1 rounded-full text-xs"},"Défiler",-1))])]))}}),ps=q(rs,[["__scopeId","data-v-f69e714e"]]);export{ps as M};
