import{d as T,j as b,q as $,c as j,g as i,o as d,e as g,u as F,m as z,w as v,b as t,i as w,f as r,h as o,t as n,l as A,v as B,F as h,r as C,p as U,n as L,C as q}from"./app-lorCX1eB.js";import{_ as D}from"./TextLink.vue_vue_type_script_setup_true_lang-CjKIcNLf.js";import{M as E}from"./MonLayout-EQxw3vQZ.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-D4wlLDbq.js";import"./utils-CYGYqgxY.js";import"./sun-BuT6VOkM.js";import"./createLucideIcon-CrA6qXj-.js";const G={class:"container mx-auto px-4 py-6 text-gray-900 dark:text-gray-100"},J={class:"flex flex-col sm:flex-row items-center justify-between mb-6 animate-fade-in"},K={class:"text-2xl sm:text-3xl font-extrabold flex items-center"},O={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6"},Q={class:"relative animate-slide-up"},W={class:"relative animate-slide-up"},X=["value"],Y={class:"hidden sm:block overflow-x-auto rounded-xl shadow-lg bg-white dark:bg-gray-800 animate-fade-in"},Z={class:"max-h-[60vh] overflow-y-auto"},tt={class:"min-w-full table-fixed"},et={class:"bg-gray-100 dark:bg-gray-700 sticky top-0 z-10"},st={class:"w-16 px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-200"},at={class:"w-1/5 px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-200"},rt={class:"w-1/4 px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-200"},lt={class:"w-16 px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-200"},ot={class:"w-16 px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-200"},nt={class:"w-1/5 px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-200"},it={class:"w-16 px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-200"},dt={class:"w-1/6 px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-200"},ut={class:"px-4 py-3 text-gray-900 dark:text-gray-100 text-sm"},ft=["title"],xt=["title"],ct={class:"px-4 py-3 text-gray-900 dark:text-gray-100 text-sm"},mt={class:"px-4 py-3 text-gray-900 dark:text-gray-100 text-sm"},gt={class:"px-4 py-3 text-gray-900 dark:text-gray-100 text-sm truncate"},yt={class:"px-4 py-3 text-gray-900 dark:text-gray-100 text-sm"},pt={class:"px-4 py-3 flex space-x-2"},bt=["onClick"],vt={key:0},ht={class:"sm:hidden grid grid-cols-1 gap-4 max-h-[60vh] overflow-y-auto animate-fade-in bg-gray-100 dark:bg-gray-900 p-4 rounded-xl"},_t={class:"flex flex-col space-y-2"},kt={class:"flex items-center justify-between"},wt=["title"],Ct={class:"text-xs text-gray-500 dark:text-gray-400 bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full"},Dt=["title"],Ht={class:"text-xs text-gray-600 dark:text-gray-300"},Pt={class:"flex gap-3 pt-2 border-t border-gray-300 dark:border-gray-600"},St=["onClick"],jt={key:0,class:"col-span-full p-4 text-center text-gray-500 dark:text-gray-400 animate-pulse bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-200 dark:border-gray-700"},At={key:0,class:"flex flex-col sm:flex-row justify-between items-center py-2 px-4 bg-gray-50 dark:bg-gray-700 rounded-b-lg text-sm mt-4 space-y-2 sm:space-y-0"},Lt=["disabled"],Mt={class:"text-gray-700 dark:text-gray-200"},Nt=["disabled"],H=10,Vt=T({__name:"Index",props:{disciplines:{},formations:{}},setup(M){const y=M;console.log(y.disciplines);const x=b(""),c=b(""),f=b([...y.disciplines]),u=b(1);$([x,c],()=>{N(),u.value=1});function N(){let l=[...y.disciplines];x.value&&(l=l.filter(e=>e.nom.toLowerCase().includes(x.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(x.value.toLowerCase()))),c.value&&(l=l.filter(e=>e.formations.some(s=>s.id===Number(c.value)))),f.value=l}function P(l){confirm("Êtes-vous sûr de vouloir supprimer cette discipline ?")&&q().delete(route("disciplines.destroy",l),{preserveScroll:!0,onSuccess:()=>{f.value=f.value.filter(e=>e.id!==l)}})}const p=j(()=>{const l=(u.value-1)*H,e=l+H;return f.value.slice(l,e)}),_=j(()=>Math.ceil(f.value.length/H));function V(){u.value>1&&u.value--}function I(){u.value<_.value&&u.value++}function S(l,e){return l?l.length>e?l.substring(0,e)+"...":l:"Aucune description"}const a={base:"text-blue-500",hover:"text-blue-400",edit:"text-yellow-500",editHover:"text-yellow-400",delete:"text-red-500",deleteHover:"text-red-400"};return(l,e)=>(d(),i(h,null,[g(F(z),{title:"Liste des Disciplines"}),g(E,null,{default:v(()=>[t("div",G,[t("div",J,[t("h1",K,[t("i",{class:o(["fas fa-book mr-3",a.base,"transition-colors duration-300 hover:"+a.hover])},null,2),r(" Liste des Disciplines ("+n(f.value.length)+") ",1)]),g(D,{href:l.route("disciplines.create"),class:"mt-4 sm:mt-0 bg-green-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-green-700 transition-all duration-300 flex items-center"},{default:v(()=>e[2]||(e[2]=[t("i",{class:"fas fa-plus mr-2 transition-colors duration-300 hover:text-green-300"},null,-1),r(" Ajouter ")])),_:1},8,["href"])]),t("div",O,[t("div",Q,[t("i",{class:o(["fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2",a.base])},null,2),A(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s),placeholder:"Rechercher...",class:"pl-12 pr-4 py-2 sm:py-3 w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-sm sm:text-base"},null,512),[[B,x.value]])]),t("div",W,[t("i",{class:o(["fas fa-filter absolute left-4 top-1/2 transform -translate-y-1/2",a.base])},null,2),A(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s),class:"pl-12 pr-4 py-2 sm:py-3 w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-sm sm:text-base"},[e[3]||(e[3]=t("option",{value:""},"Toutes les formations",-1)),(d(!0),i(h,null,C(y.formations,s=>(d(),i("option",{key:s.id,value:s.id},n(s.titre),9,X))),128))],512),[[U,c.value]])])]),t("div",Y,[t("div",Z,[t("table",tt,[t("thead",et,[t("tr",null,[t("th",st,[t("i",{class:o(["fas fa-id-badge mr-1",a.base])},null,2),e[4]||(e[4]=r("ID "))]),t("th",at,[t("i",{class:o(["fas fa-book-open mr-1",a.base])},null,2),e[5]||(e[5]=r("Nom "))]),t("th",rt,[t("i",{class:o(["fas fa-info-circle mr-1",a.base])},null,2),e[6]||(e[6]=r("Description "))]),t("th",lt,[t("i",{class:o(["fas fa-clock mr-1",a.base])},null,2),e[7]||(e[7]=r("H. Hebdo "))]),t("th",ot,[t("i",{class:o(["fas fa-hourglass mr-1",a.base])},null,2),e[8]||(e[8]=r("H. Total "))]),t("th",nt,[t("i",{class:o(["fas fa-user-tie mr-1",a.base])},null,2),e[9]||(e[9]=r("Formateurs "))]),t("th",it,[t("i",{class:o(["fas fa-weight mr-1",a.base])},null,2),e[10]||(e[10]=r("Coef "))]),t("th",dt,[t("i",{class:o(["fas fa-cogs mr-1",a.base])},null,2),e[11]||(e[11]=r("Actions "))])])]),t("tbody",null,[(d(!0),i(h,null,C(p.value,(s,k)=>(d(),i("tr",{key:s.id,class:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 animate-row-in",style:L({animationDelay:`${.1*k}s`})},[t("td",ut,n(s.id),1),t("td",{class:"px-4 py-3 text-gray-900 dark:text-gray-100 text-sm truncate",title:s.nom},n(s.nom),9,ft),t("td",{class:"px-4 py-3 text-gray-900 dark:text-gray-100 text-sm truncate",title:s.description},n(S(s.description,30)),9,xt),t("td",ct,n(s.heures_hebdo),1),t("td",mt,n(s.heures_total),1),t("td",gt,n(s.formateurs.map(m=>m.nom).join(", ")||"Aucun"),1),t("td",yt,n(s.heures_total/10),1),t("td",pt,[g(D,{href:l.route("disciplines.edit",s.id),class:o(["flex items-center text-sm",a.edit,"hover:"+a.editHover,"transition-colors duration-300"])},{default:v(()=>e[12]||(e[12]=[t("i",{class:"fas fa-edit mr-1 animate-pulse"},null,-1),r(" Modifier ")])),_:2},1032,["href","class"]),t("button",{onClick:m=>P(s.id),class:o(["flex items-center text-sm",a.delete,"hover:"+a.deleteHover,"transition-colors duration-300"])},e[13]||(e[13]=[t("i",{class:"fas fa-trash mr-1 animate-pulse"},null,-1),r(" Supprimer ")]),10,bt)])],4))),128)),p.value.length===0?(d(),i("tr",vt,e[14]||(e[14]=[t("td",{colspan:"8",class:"px-4 py-6 text-center text-gray-500 dark:text-gray-400 animate-pulse"},[t("i",{class:"fas fa-exclamation-circle mr-2 text-xl"}),r(" Aucune discipline trouvée ")],-1)]))):w("",!0)])])])]),t("div",ht,[(d(!0),i(h,null,C(p.value,(s,k)=>(d(),i("div",{key:s.id,class:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 p-4 hover:shadow-xl transition-all duration-300 animate-card-in",style:L({animationDelay:`${.1*k}s`})},[t("div",_t,[t("div",kt,[t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",title:s.nom},[t("i",{class:o(["fas fa-book-open mr-2",a.base])},null,2),r(" "+n(s.nom),1)],8,wt),t("span",Ct," ID: "+n(s.id),1)]),t("p",{class:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2",title:s.description},n(S(s.description,50)),9,Dt),t("div",Ht,[t("p",null,[t("i",{class:o(["fas fa-clock mr-1",a.base])},null,2),r("Hebdo: "+n(s.heures_hebdo)+"h",1)]),t("p",null,[t("i",{class:o(["fas fa-hourglass mr-1",a.base])},null,2),r("Total: "+n(s.heures_total)+"h",1)]),t("p",null,[t("i",{class:o(["fas fa-user-tie mr-1",a.base])},null,2),r(" "+n(s.formateurs.map(m=>m.nom).join(", ")||"Aucun"),1)]),t("p",null,[t("i",{class:o(["fas fa-weight mr-1",a.base])},null,2),r("Coef: "+n(s.heures_total/10),1)])]),t("div",Pt,[g(D,{href:l.route("disciplines.edit",s.id),class:o(["flex items-center text-sm",a.edit,"hover:"+a.editHover,"transition-colors duration-300"])},{default:v(()=>e[15]||(e[15]=[t("i",{class:"fas fa-edit mr-1 animate-pulse"},null,-1),r(" Modifier ")])),_:2},1032,["href","class"]),t("button",{onClick:m=>P(s.id),class:o(["flex items-center text-sm",a.delete,"hover:"+a.deleteHover,"transition-colors duration-300"])},e[16]||(e[16]=[t("i",{class:"fas fa-trash mr-1 animate-pulse"},null,-1),r(" Supprimer ")]),10,St)])])],4))),128)),p.value.length===0?(d(),i("div",jt,e[17]||(e[17]=[t("i",{class:"fas fa-exclamation-circle mr-2 text-xl"},null,-1),r(" Aucune discipline trouvée ")]))):w("",!0)]),f.value.length>0?(d(),i("div",At,[t("button",{onClick:V,disabled:u.value===1,class:"w-full sm:w-auto px-4 py-2 bg-blue-500 text-white rounded-lg disabled:bg-gray-300 dark:disabled:bg-gray-600 hover:bg-blue-600 transition-all duration-200"},e[18]||(e[18]=[t("i",{class:"fas fa-arrow-left mr-2"},null,-1),r("Précédent ")]),8,Lt),t("span",Mt," Page "+n(u.value)+" / "+n(_.value)+" ("+n(f.value.length)+" disciplines) ",1),t("button",{onClick:I,disabled:u.value===_.value,class:"w-full sm:w-auto px-4 py-2 bg-blue-500 text-white rounded-lg disabled:bg-gray-300 dark:disabled:bg-gray-600 hover:bg-blue-600 transition-all duration-200"},e[19]||(e[19]=[t("i",{class:"fas fa-arrow-right mr-2"},null,-1),r("Suivant ")]),8,Nt)])):w("",!0)])]),_:1})],64))}}),Et=R(Vt,[["__scopeId","data-v-0f9a2514"]]);export{Et as default};
