import{a as S,b as $,_ as P}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DqvJ_qTh.js";import{d as R,r as D,n as T,l as V,k as B,e as a,o as t,a as e,z as d,p as r,u as l,g as o,w as i,T as u,t as x,F as E,f as L,b as M,y as j,R as q}from"./app-Dpxg1-kk.js";import{_ as f}from"./TextLink.vue_vue_type_script_setup_true_lang-Bofad1sM.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"h-screen bg-gray-900 text-gray-100 overflow-hidden"},K={class:"flex h-[calc(100vh-64px)]"},O={class:"mt-6"},X={key:0},H={key:0},I={key:0},J={key:0},Q={key:1,class:"badge bg-red-500 rounded-full text-[10px] px-1"},U={key:0},W={key:0},Y={key:1},Z={key:0},ss={key:0},es={key:0},as={key:0},ts={key:0},ls={key:2},ns={key:0},rs={key:0},os={key:0},is={key:0},us={key:0},ds={key:3,class:"mt-4 px-4"},fs={key:0,class:"space-y-2 max-h-64 overflow-y-auto"},cs={class:"text-xs text-gray-400"},ps=["onClick"],ms={key:1,class:"text-sm text-gray-400"},vs={class:"mt-auto p-4"},hs={class:"flex items-center justify-between w-full px-4 py-3 text-gray-300 bg-gray-800 rounded-lg hover:bg-gray-700 transition-all"},_s={class:"flex items-center"},ks={key:0},xs={key:1,class:"ml-2 bg-red-500 text-white text-xs rounded-full px-2"},ys={key:0,class:"fas fa-chevron-down"},gs={class:"flex-1 p-6 overflow-y-auto overflow-x-hidden relative transition-all"},bs=R({__name:"MonLayout",setup(ws){var C;const n=D(!0),g=()=>{n.value=!n.value},y=T(),h=y.props.auth.user,F=h&&h.role==="admin",N=h&&h.role==="formateur",b=h&&h.role==="apprenant",m=D(((C=y.props.dashboardData)==null?void 0:C.notifications)||[]);V(()=>{var p;return(p=y.props.dashboardData)==null?void 0:p.notifications},p=>{m.value=p||[]},{immediate:!0});const w=B(()=>m.value.filter(p=>p.type==="note_update").length),A=p=>{var v;const s=(v=document.querySelector('meta[name="csrf-token"]'))==null?void 0:v.content;if(!s){console.error("CSRF token not found");return}q.post(u("notifications.read",p),{},{headers:{"X-CSRF-TOKEN":s}}).then(_=>{_.data.success?m.value=m.value.filter(k=>k.id!==p):console.error("Failed to mark as read:",_.data.message)}).catch(_=>{var k;console.error("Error marking notification as read:",((k=_.response)==null?void 0:k.data)||_.message)})},c=p=>u().current(p);return(p,s)=>(t(),a("div",G,[e("header",{class:"header"},[e("div",{class:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between"},[s[1]||(s[1]=e("div",{class:"flex items-center"},[e("i",{class:"fas fa-chalkboard-teacher text-2xl mr-3 text-blue-400 animate-pulse"}),e("h1",{class:"text-xl font-bold tracking-tight"},"CFPCa - Dashboard")],-1)),e("button",{onClick:g,class:"lg:hidden text-gray-300 hover:text-white transition-all"},s[0]||(s[0]=[e("i",{class:"fas fa-bars text-xl"},null,-1)]))])]),e("div",K,[e("aside",{class:d(["sidebar h-full transition-all overflow-y-auto",{collapsed:!n.value}])},[e("button",{onClick:g,class:"toggle-btn"},[e("i",{class:d([n.value?"fas fa-chevron-left":"fas fa-chevron-right","text-lg"])},null,2)]),e("nav",O,[l(b)?(t(),a("div",X,[o(f,{href:l(u)("apprenant.dashboard"),class:d(["nav-link",{active:c("apprenant.dashboard")}])},{default:i(()=>[s[2]||(s[2]=e("i",{class:"fas fa-tachometer-alt mr-3"},null,-1)),n.value?(t(),a("span",H,"Dashboard")):r("",!0)]),_:1},8,["href","class"]),o(f,{href:l(u)("apprenant.disciplines"),class:d(["nav-link",{active:c("apprenant.disciplines")}])},{default:i(()=>[s[3]||(s[3]=e("i",{class:"fas fa-tachometer-alt mr-3"},null,-1)),n.value?(t(),a("span",I,"Mes disciplines")):r("",!0)]),_:1},8,["href","class"]),o(f,{href:l(u)("apprenant.notes"),class:d(["nav-link",{active:c("apprenant.notes")}])},{default:i(()=>[s[4]||(s[4]=e("i",{class:"fas fa-star mr-3"},null,-1)),n.value?(t(),a("span",J,"Mes Notes")):r("",!0),w.value>0&&n.value?(t(),a("span",Q,x(w.value),1)):r("",!0)]),_:1},8,["href","class"]),o(f,{href:l(u)("apprenant.carnet"),class:d(["nav-link",{active:c("apprenant.carnet")}])},{default:i(()=>[s[5]||(s[5]=e("i",{class:"fas fa-book mr-3"},null,-1)),n.value?(t(),a("span",U,"Mon Carnet")):r("",!0)]),_:1},8,["href","class"]),o(f,{href:l(u)("apprenant.progression"),class:d(["nav-link",{active:c("apprenant.progression")}])},{default:i(()=>[s[6]||(s[6]=e("i",{class:"fas fa-chart-line mr-3"},null,-1)),n.value?(t(),a("span",W,"Ma Progression")):r("",!0)]),_:1},8,["href","class"])])):r("",!0),l(N)?(t(),a("div",Y,[o(f,{href:l(u)("formateur.dashboard"),class:d(["nav-link",{active:c("formateur.dashboard")}])},{default:i(()=>[s[7]||(s[7]=e("i",{class:"fas fa-tachometer-alt mr-3"},null,-1)),n.value?(t(),a("span",Z,"Dashboard")):r("",!0)]),_:1},8,["href","class"]),o(f,{href:l(u)("formateur.formations"),class:d(["nav-link",{active:c("formateur.formations")}])},{default:i(()=>[s[8]||(s[8]=e("i",{class:"fas fa-book mr-3"},null,-1)),n.value?(t(),a("span",ss,"Mes Formations")):r("",!0)]),_:1},8,["href","class"]),o(f,{href:l(u)("formateur.apprenants"),class:d(["nav-link",{active:c("formateur.apprenants")}])},{default:i(()=>[s[9]||(s[9]=e("i",{class:"fas fa-users mr-3"},null,-1)),n.value?(t(),a("span",es,"Mes Apprenants")):r("",!0)]),_:1},8,["href","class"]),o(f,{href:l(u)("formateur.notes"),class:d(["nav-link",{active:c("formateur.notes")}])},{default:i(()=>[s[10]||(s[10]=e("i",{class:"fas fa-star mr-3"},null,-1)),n.value?(t(),a("span",as,"Gérer les notes")):r("",!0)]),_:1},8,["href","class"]),o(f,{href:l(u)("formateur.disciplines"),class:d(["nav-link",{active:c("formateur.disciplines")}])},{default:i(()=>[s[11]||(s[11]=e("i",{class:"fas fa-book-open mr-3"},null,-1)),n.value?(t(),a("span",ts,"Mes Disciplines")):r("",!0)]),_:1},8,["href","class"])])):r("",!0),l(F)?(t(),a("div",ls,[o(f,{href:l(u)("admin.dashboard"),class:d(["nav-link",{active:c("admin.dashboard")}])},{default:i(()=>[s[12]||(s[12]=e("i",{class:"fas fa-tachometer-alt mr-3"},null,-1)),n.value?(t(),a("span",ns,"Dashboard Admin")):r("",!0)]),_:1},8,["href","class"]),o(f,{href:l(u)("apprenants.index"),class:d(["nav-link",{active:c("apprenants.index")}])},{default:i(()=>[s[13]||(s[13]=e("i",{class:"fas fa-user-tie mr-3"},null,-1)),n.value?(t(),a("span",rs,"Apprenants")):r("",!0)]),_:1},8,["href","class"]),o(f,{href:l(u)("formateurs.index"),class:d(["nav-link",{active:c("formateurs.index")}])},{default:i(()=>[s[14]||(s[14]=e("i",{class:"fas fa-user-tie mr-3"},null,-1)),n.value?(t(),a("span",os,"Formateurs")):r("",!0)]),_:1},8,["href","class"]),o(f,{href:l(u)("formations.index"),class:d(["nav-link",{active:c("formations.index")}])},{default:i(()=>[s[15]||(s[15]=e("i",{class:"fas fa-book mr-3"},null,-1)),n.value?(t(),a("span",is,"Formations")):r("",!0)]),_:1},8,["href","class"]),o(f,{href:l(u)("disciplines.index"),class:d(["nav-link",{active:c("disciplines.index")}])},{default:i(()=>[s[16]||(s[16]=e("i",{class:"fas fa-book mr-3"},null,-1)),n.value?(t(),a("span",us,"Disciplines")):r("",!0)]),_:1},8,["href","class"])])):r("",!0),l(b)&&n.value?(t(),a("div",ds,[s[17]||(s[17]=e("h3",{class:"text-sm font-semibold text-gray-400 mb-2"},"Notifications",-1)),m.value.length?(t(),a("div",fs,[(t(!0),a(E,null,L(m.value,v=>(t(),a("div",{key:v.id,class:"p-2 bg-gray-700 rounded-lg text-sm text-white hover:bg-gray-600 transition-all"},[e("p",null,x(v.message),1),e("p",cs,x(v.created_at),1),e("button",{onClick:_=>A(v.id),class:"text-teal-400 hover:text-teal-300"}," Marquer comme lu ",8,ps)]))),128))])):(t(),a("p",ms,"Aucune notification"))])):r("",!0)]),e("div",vs,[o(l(P),null,{default:i(()=>[o(l(S),null,{default:i(()=>[e("button",hs,[e("span",_s,[s[18]||(s[18]=e("i",{class:"fas fa-user mr-2"},null,-1)),n.value?(t(),a("span",ks,"Profil")):r("",!0),m.value.length?(t(),a("span",xs,x(m.value.length),1)):r("",!0)]),n.value?(t(),a("i",ys)):r("",!0)])]),_:1}),o(l($),{class:"bg-gray-800 text-gray-100 rounded-lg shadow-lg"},{default:i(()=>[o(f,{class:"block w-full px-4 py-2 hover:bg-gray-700",href:l(u)("profile.edit"),as:"button"},{default:i(()=>s[19]||(s[19]=[M(" Paramètres ")])),_:1},8,["href"]),o(f,{class:"block w-full px-4 py-2 hover:bg-gray-700",method:"post",href:l(u)("logout"),as:"button"},{default:i(()=>s[20]||(s[20]=[M(" Déconnexion ")])),_:1},8,["href"])]),_:1})]),_:1})])],2),e("main",gs,[j(p.$slots,"default",{},void 0,!0),s[21]||(s[21]=e("div",{class:"scroll-hint"},"Défiler",-1))])])]))}}),Ns=z(bs,[["__scopeId","data-v-a8d9a296"]]);export{Ns as M};
