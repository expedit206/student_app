import{d as B,j as w,A as F,c as I,a as S,o as l,w as V,b as o,g as n,i as y,f as p,l as b,F as x,r as g,t as d,p as z,n as _,H as k,v as C,W as K,T as M}from"./app-BXPZTGRo.js";import{M as A}from"./MonLayout-D1Un2ZID.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-LfXqkydO.js";import"./utils-C9TLVt-D.js";import"./TextLink.vue_vue_type_script_setup_true_lang-FetwDk6R.js";import"./sun-UiqwX4Y9.js";import"./createLucideIcon-BTawGQWn.js";const E={class:"p-4 sm:p-6 bg-gray-100 text-gray-900 min-h-screen overflow-hidden"},T={class:"mb-8 animate-fade-up"},U={class:"relative max-w-md"},L=["value"],W={key:0,class:"hidden sm:block bg-white rounded-xl shadow-2xl overflow-hidden transform transition-all duration-500 hover:shadow-[0_0_15px_rgba(234,179,8,0.5)] animate-fade-in"},j={class:"max-h-[500px] overflow-y-auto"},G={class:"min-w-full"},H={class:"bg-gradient-to-r from-gray-200 to-gray-300 text-gray-700 animate-slide-in"},q={class:"py-4 px-6 text-gray-900 sticky left-0 bg-white z-10 font-medium"},J={key:0,class:"flex items-center gap-2"},O=["onBlur","onKeyup"],P=["onClick"],Q=["onClick"],R={key:0},X=["colspan"],Y={key:1,class:"sm:hidden grid grid-cols-1 gap-4 bg-white rounded-xl shadow-2xl p-4 max-h-[500px] overflow-y-auto animate-fade-in"},Z={class:"flex flex-col space-y-3"},ee=["title"],te={class:"grid grid-cols-1 gap-2"},oe={class:"text-sm text-gray-600 font-medium"},se={key:0,class:"flex items-center gap-2 mt-1"},le=["onBlur","onKeyup"],ne=["onClick"],ae=["onClick"],re={key:0,class:"col-span-full p-4 text-center text-gray-500 animate-pulse bg-gray-50 rounded-lg shadow-md border border-gray-200"},ie={key:2,class:"text-center text-gray-500 animate-pulse p-6 bg-white rounded-xl shadow-md"},ue=B({__name:"Index",props:{formations:{},selectedFormation:{}},setup($){const v=$,r=w(v.selectedFormation),a=w(null);F(()=>{!r.value&&v.formations.length>0&&(r.value=v.formations[0].id)});const m=I(()=>v.formations.find(u=>u.id===r.value)||{apprenants:[],disciplines:[]}),N=u=>{r.value=u},h=(u,e,t)=>{a.value={apprenantId:u,disciplineId:e,value:t}},f=(u,e)=>{a.value&&a.value.value!==null&&r.value?K.post(M("formateur.updateNote"),{apprenant_id:u,formation_id:r.value,discipline_id:e,note:a.value.value},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{const t=v.formations.find(s=>s.id===r.value),c=t==null?void 0:t.apprenants.find(s=>s.id===u);c&&(c.notes[e]=a.value.value),a.value=null},onError:()=>{a.value=null}}):a.value=null};return(u,e)=>(l(),S(A,null,{default:V(()=>[o("div",E,[e[18]||(e[18]=o("h1",{class:"text-2xl sm:text-3xl font-extrabold mb-8 flex items-center animate-slide-in"},[o("i",{class:"fas fa-star mr-3 text-3xl sm:text-4xl text-yellow-600 animate-spin-slow"}),p(" Gestion des Notes ")],-1)),o("div",T,[o("div",U,[e[7]||(e[7]=o("i",{class:"fas fa-graduation-cap absolute left-4 top-1/2 transform -translate-y-1/2 text-yellow-600 animate-pulse"},null,-1)),b(o("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),onChange:e[1]||(e[1]=t=>N(r.value)),class:"w-full pl-12 pr-10 py-2 sm:py-3 bg-white border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent appearance-none shadow-md hover:shadow-xl transition-all duration-300 hover:bg-gray-50 text-sm sm:text-base"},[e[6]||(e[6]=o("option",{value:null},"Sélectionnez une formation",-1)),(l(!0),n(x,null,g(v.formations,t=>(l(),n("option",{key:t.id,value:t.id},d(t.titre),9,L))),128))],544),[[z,r.value]]),e[8]||(e[8]=o("i",{class:"fas fa-chevron-down absolute right-4 top-1/2 transform -translate-y-1/2 text-yellow-600 animate-bounce pointer-events-none"},null,-1))])]),r.value?(l(),n("div",W,[o("div",j,[o("table",G,[o("thead",null,[o("tr",H,[e[9]||(e[9]=o("th",{class:"py-4 px-6 text-left font-semibold sticky left-0 bg-gray-200 z-10"},"Apprenant ",-1)),(l(!0),n(x,null,g(m.value.disciplines,t=>(l(),n("th",{key:t.id,class:"py-4 px-6 text-left font-semibold"},d(t.nom),1))),128))])]),o("tbody",null,[(l(!0),n(x,null,g(m.value.apprenants,(t,c)=>(l(),n("tr",{key:t.id,class:"border-b border-gray-200 hover:bg-gray-50 transition-all duration-300 animate-row-in",style:_({animationDelay:`${.1+c*.1}s`})},[o("td",q,d(t.prenom)+" "+d(t.nom),1),(l(!0),n(x,null,g(m.value.disciplines,s=>(l(),n("td",{key:s.id,class:"py-4 px-6 text-gray-900"},[a.value&&a.value.apprenantId===t.id&&a.value.disciplineId===s.id?(l(),n("div",J,[b(o("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>a.value.value=i),type:"number",min:"0",max:"20",step:"0.01",class:"w-20 p-2 bg-gray-100 border border-gray-300 rounded text-gray-900 focus:outline-none focus:ring-2 focus:ring-yellow-500 shadow-sm hover:shadow-md transition-all duration-200",onBlur:i=>f(t.id,s.id),onKeyup:k(i=>f(t.id,s.id),["enter"]),ref_for:!0,ref:"noteInput",autofocus:""},null,40,O),[[C,a.value.value]]),o("button",{onClick:i=>f(t.id,s.id),class:"text-green-600 hover:text-green-700 text-lg hover:scale-110 transition-transform duration-200"},e[10]||(e[10]=[o("i",{class:"fas fa-check"},null,-1)]),8,P),o("button",{onClick:e[3]||(e[3]=i=>a.value=null),class:"text-red-600 hover:text-red-700 text-lg hover:scale-110 transition-transform duration-200"},e[11]||(e[11]=[o("i",{class:"fas fa-times"},null,-1)]))])):(l(),n("span",{key:1,class:"cursor-pointer hover:text-yellow-700 transition-colors duration-200 font-medium",onClick:i=>h(t.id,s.id,t.notes[s.id]||null)},d(t.notes[s.id]!==void 0&&t.notes[s.id]!==null?t.notes[s.id]+"/20":"Non noté"),9,Q))]))),128))],4))),128)),m.value.apprenants.length===0?(l(),n("tr",R,[o("td",{colspan:m.value.disciplines.length+1,class:"p-6 text-center text-gray-500 animate-pulse"},e[12]||(e[12]=[o("i",{class:"fas fa-exclamation-circle mr-2 text-xl animate-bounce"},null,-1),p(" Aucun apprenant trouvé pour cette formation ")]),8,X)])):y("",!0)])])])])):y("",!0),r.value?(l(),n("div",Y,[(l(!0),n(x,null,g(m.value.apprenants,(t,c)=>(l(),n("div",{key:t.id,class:"bg-gray-50 rounded-lg shadow-md border border-gray-200 p-4 hover:shadow-xl transition-all duration-300 animate-card-in hover:bg-gray-100",style:_({animationDelay:`${.1+c*.1}s`})},[o("div",Z,[o("h2",{class:"text-lg font-semibold text-gray-900 truncate",title:t.prenom+" "+t.nom},[e[13]||(e[13]=o("i",{class:"fas fa-user mr-2 text-yellow-600"},null,-1)),p(d(t.prenom)+" "+d(t.nom),1)],8,ee),o("div",te,[(l(!0),n(x,null,g(m.value.disciplines,s=>(l(),n("div",{key:s.id,class:"flex flex-col"},[o("span",oe,d(s.nom),1),a.value&&a.value.apprenantId===t.id&&a.value.disciplineId===s.id?(l(),n("div",se,[b(o("input",{"onUpdate:modelValue":e[4]||(e[4]=i=>a.value.value=i),type:"number",min:"0",max:"20",step:"0.01",class:"w-20 p-2 bg-gray-100 border border-gray-300 rounded text-gray-900 focus:outline-none focus:ring-2 focus:ring-yellow-500 shadow-sm hover:shadow-md transition-all duration-200",onBlur:i=>f(t.id,s.id),onKeyup:k(i=>f(t.id,s.id),["enter"]),ref_for:!0,ref:"noteInput",autofocus:""},null,40,le),[[C,a.value.value]]),o("button",{onClick:i=>f(t.id,s.id),class:"text-green-600 hover:text-green-700 text-lg hover:scale-110 transition-transform duration-200"},e[14]||(e[14]=[o("i",{class:"fas fa-check"},null,-1)]),8,ne),o("button",{onClick:e[5]||(e[5]=i=>a.value=null),class:"text-red-600 hover:text-red-700 text-lg hover:scale-110 transition-transform duration-200"},e[15]||(e[15]=[o("i",{class:"fas fa-times"},null,-1)]))])):(l(),n("span",{key:1,class:"text-sm text-gray-900 hover:text-yellow-700 transition-colors duration-200 cursor-pointer mt-1 font-medium",onClick:i=>h(t.id,s.id,t.notes[s.id]||null)},d(t.notes[s.id]!==void 0&&t.notes[s.id]!==null?t.notes[s.id]+"/20":"Non noté"),9,ae))]))),128))])])],4))),128)),m.value.apprenants.length===0?(l(),n("div",re,e[16]||(e[16]=[o("i",{class:"fas fa-exclamation-circle mr-2 text-xl animate-bounce"},null,-1),p(" Aucun apprenant trouvé pour cette formation ")]))):y("",!0)])):y("",!0),r.value?y("",!0):(l(),n("div",ie,e[17]||(e[17]=[o("i",{class:"fas fa-info-circle mr-2 text-xl animate-bounce"},null,-1),p(" Veuillez sélectionner une formation pour voir les notes ")])))])]),_:1}))}}),pe=D(ue,[["__scopeId","data-v-69d32895"]]);export{pe as default};
