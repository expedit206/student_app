import{d as B,r as g,k as p,l as T,e as d,o as u,g as y,u as $,m as z,w as k,a as t,b as r,i as A,v as E,F as h,f as L,t as o,j as U,p as N,q as O,C as R}from"./app-C_j1LqwD.js";import{_ as P}from"./TextLink.vue_vue_type_script_setup_true_lang-CVP-jFSD.js";import{M as G}from"./MonLayout-DPb2y940.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CH-SlJh5.js";import"./utils-BkOquAHE.js";const J={class:"container mx-auto px-4 py-3 text-gray-900 dark:text-gray-100"},K={class:"flex items-center justify-between mb-3 animate-fade-in"},Q={class:"flex flex-col sm:flex-row sm:space-x-4 mb-4 animate-slide-up",style:{animationDelay:"0.2s"}},W={class:"relative flex-1"},X={class:"relative mt-2 sm:mt-0 sm:w-48"},Y=["value"],Z={class:"mb-4 text-gray-600 dark:text-gray-300"},tt={class:"overflow-x-auto rounded-xl shadow-lg bg-white dark:bg-gray-800 animate-fade-in",style:{animationDelay:"0.4s"}},et={class:"max-h-[60vh] overflow-y-auto relative"},at={class:"min-w-full table-fixed"},st={class:"px-2 py-3 text-gray-900 dark:text-gray-100 text-sm"},rt=["title"],lt=["title"],ot=["title"],nt=["title"],it={class:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-300 px-2 py-1 rounded-full text-xs"},dt={class:"px-2 py-3 flex space-x-2"},ut=["onClick"],xt={key:0,class:"p-6 text-center text-gray-500 dark:text-gray-400 animate-pulse"},ft={key:0,class:"flex justify-between items-center py-2 px-4 bg-gray-50 dark:bg-gray-700 rounded-b-lg text-sm"},mt=["disabled"],ct={class:"text-gray-700 dark:text-gray-200"},gt=["disabled"],w=20,pt=B({__name:"Index",props:{apprenants:{type:Object,required:!0}},setup(S){const b=S,i=g(""),x=g(""),n=g([...b.apprenants]),l=g(1),D=p(()=>{const s=new Set(b.apprenants.map(e=>{var a;return((a=e.formation)==null?void 0:a.titre)||"Non assignée"}));return["Choisir une formation",...Array.from(s)]});T([i,x],()=>{M(),l.value=1});function M(){let s=[...b.apprenants];i.value&&(s=s.filter(e=>{var a,c,f,m;return((a=e.nom)==null?void 0:a.toLowerCase().includes(i.value.toLowerCase()))||""||((c=e.prenom)==null?void 0:c.toLowerCase().includes(i.value.toLowerCase()))||""||((m=(f=e.user)==null?void 0:f.email)==null?void 0:m.toLowerCase().includes(i.value.toLowerCase()))||""})),x.value&&x.value!=="Toutes"&&(s=s.filter(e=>{var a;return(((a=e.formation)==null?void 0:a.titre)||"Non assignée")===x.value})),n.value=s}function V(s){confirm("Êtes-vous sûr de vouloir supprimer cet étudiant ?")&&R().delete(route("apprenants.destroy",s),{preserveScroll:!0,onSuccess:()=>{n.value=n.value.filter(e=>e.id!==s)}})}const j=p(()=>{const s=(l.value-1)*w,e=s+w;return n.value.slice(s,e)}),v=p(()=>Math.ceil(n.value.length/w)),F=p(()=>n.value.length);function I(){l.value>1&&l.value--}function q(){l.value<v.value&&l.value++}return(s,e)=>(u(),d(h,null,[y($(z),{title:"Liste des Étudiants"}),y(G,null,{default:k(()=>[t("div",J,[t("div",K,[e[3]||(e[3]=t("h1",{class:"text-3xl font-extrabold flex items-center"},[t("i",{class:"fas fa-user-graduate mr-3 text-blue-500 dark:text-blue-400"}),r(" Liste des Étudiants ")],-1)),y(P,{href:s.route("apprenants.create"),class:"bg-green-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-green-700 transition-all duration-300 flex items-center"},{default:k(()=>e[2]||(e[2]=[t("i",{class:"fas fa-plus mr-2"},null,-1),r(" Ajouter ")])),_:1},8,["href"])]),t("div",Q,[t("div",W,[e[4]||(e[4]=t("i",{class:"fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400"},null,-1)),A(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),placeholder:"Rechercher par nom, prénom ou email...",class:"w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-gray-900 dark:text-gray-100"},null,512),[[E,i.value]])]),t("div",X,[e[5]||(e[5]=t("i",{class:"fas fa-book absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400"},null,-1)),A(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>x.value=a),class:"w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-gray-900 dark:text-gray-100"},[(u(!0),d(h,null,L(D.value,a=>(u(),d("option",{key:a,value:a},o(a),9,Y))),128))],512),[[U,x.value]])])]),t("div",Z,[t("span",null,o(F.value)+" apprenants trouvés",1)]),t("div",tt,[t("div",et,[t("table",at,[e[8]||(e[8]=t("thead",{class:"bg-gray-100 dark:bg-gray-700 sticky top-0 z-10"},[t("tr",null,[t("th",{class:"w-16 px-2 py-3 text-left font-semibold text-gray-700 dark:text-gray-200 text-sm"},[t("i",{class:"fas fa-id-badge mr-1"}),r("ID ")]),t("th",{class:"w-28 px-2 py-3 text-left font-semibold text-gray-700 dark:text-gray-200 text-sm"},[t("i",{class:"fas fa-user mr-1"}),r("Nom ")]),t("th",{class:"w-28 px-2 py-3 text-left font-semibold text-gray-700 dark:text-gray-200 text-sm"},[t("i",{class:"fas fa-user-circle mr-1"}),r("Prénom ")]),t("th",{class:"w-48 px-2 py-3 text-left font-semibold text-gray-700 dark:text-gray-200 text-sm"},[t("i",{class:"fas fa-envelope mr-1"}),r("Email ")]),t("th",{class:"w-36 px-2 py-3 text-left font-semibold text-gray-700 dark:text-gray-200 text-sm"},[t("i",{class:"fas fa-book mr-1"}),r("Formation ")]),t("th",{class:"w-40 px-2 py-3 text-left font-semibold text-gray-700 dark:text-gray-200 text-sm"},[t("i",{class:"fas fa-cogs mr-1"}),r("Actions ")])])],-1)),t("tbody",null,[(u(!0),d(h,null,L(j.value,(a,c)=>{var f,m,_,C;return u(),d("tr",{key:a.id,class:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 animate-row-in",style:O({animationDelay:`${.1*c}s`})},[t("td",st,o(a.id),1),t("td",{class:"px-2 py-3 text-gray-900 dark:text-gray-100 text-sm truncate",title:a.nom},o(a.nom),9,rt),t("td",{class:"px-2 py-3 text-gray-900 dark:text-gray-100 text-sm truncate",title:a.prenom},o(a.prenom),9,lt),t("td",{class:"px-2 py-3 text-gray-900 dark:text-gray-100 text-sm truncate",title:(f=a.user)==null?void 0:f.email},o(((m=a.user)==null?void 0:m.email)||"N/A"),9,ot),t("td",{class:"px-2 py-3 text-gray-900 dark:text-gray-100 text-sm truncate",title:(_=a.formation)==null?void 0:_.titre},[t("span",it,o(((C=a.formation)==null?void 0:C.titre)||"Non assignée"),1)],8,nt),t("td",dt,[y(P,{href:s.route("apprenants.edit",a.id),class:"text-yellow-600 dark:text-yellow-400 hover:text-yellow-700 dark:hover:text-yellow-300 transition-colors duration-200 flex items-center text-sm"},{default:k(()=>e[6]||(e[6]=[t("i",{class:"fas fa-edit mr-1 animate-pulse"},null,-1),r(" Modifier ")])),_:2},1032,["href"]),t("button",{onClick:yt=>V(a.id),class:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors duration-200 flex items-center text-sm"},e[7]||(e[7]=[t("i",{class:"fas fa-trash mr-1 animate-pulse"},null,-1),r(" Supprimer ")]),8,ut)])],4)}),128))])]),n.value.length===0?(u(),d("div",xt,e[9]||(e[9]=[t("i",{class:"fas fa-exclamation-circle mr-2 text-xl"},null,-1),r(" Aucun étudiant trouvé ")]))):N("",!0)]),n.value.length>0?(u(),d("div",ft,[t("button",{onClick:I,disabled:l.value===1,class:"px-2 py-1 bg-blue-500 text-white rounded disabled:bg-gray-300 dark:disabled:bg-gray-600 hover:bg-blue-600 transition-all duration-200"},e[10]||(e[10]=[t("i",{class:"fas fa-arrow-left"},null,-1)]),8,mt),t("span",ct,o(l.value)+" / "+o(v.value),1),t("button",{onClick:q,disabled:l.value===v.value,class:"px-2 py-1 bg-blue-500 text-white rounded disabled:bg-gray-300 dark:disabled:bg-gray-600 hover:bg-blue-600 transition-all duration-200"},e[11]||(e[11]=[t("i",{class:"fas fa-arrow-right"},null,-1)]),8,gt)])):N("",!0)])])]),_:1})],64))}}),Ct=H(pt,[["__scopeId","data-v-2fbb2b9a"]]);export{Ct as default};
